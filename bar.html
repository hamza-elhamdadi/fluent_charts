<!doctype html>
<html>
  <head>
    <title>Vega-Lite Bar Chart</title>
    <meta charset="utf-8" />

    <script src="https://cdn.jsdelivr.net/npm/vega@5.30.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.21.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.26.0"></script>

    <style media="screen">
      /* Add space between Vega-Embed links  */
      .vega-actions a {
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <!-- <h1>Template for Embedding Vega-Lite Visualization</h1> -->
    <!-- Container for the visualization -->
    <div id="vis"></div>


    <script>
        let plot_color = "#222";
        // let plot_color = "#ddd";

        // let data = [
        //     // positive levers
        //     [ {name: 'First Class', reward: 1}, {name: 'Seventh Heaven', reward: 3} ],
        //     [ {name: 'First Class', reward: 3}, {name: 'Seventh Heaven', reward: 1} ],
        //     // negative levers
        //     [ {name: 'Abduction', reward: 1}, {name: 'Motormouth', reward: 3} ],
        //     [ {name: 'Abduction', reward: 3}, {name: 'Motormouth', reward: 1} ],
        //     // neutral levers
        //     [ {name: 'A', reward: 1}, {name: 'B', reward: 3} ],
        //     [ {name: 'B', reward: 1}, {name: 'A', reward: 3} ]
        // ]

        let data = [
            // positive levers
            [ {name: 'First Class', reward: 1}, {name: 'Seventh Heaven', reward: 3}, {name: 'Sensational', reward: 2}, {name: 'Felicity', reward: 0}, {name: 'Unsurpassable', reward: 1} ],
            [ {name: 'First Class', reward: 3}, {name: 'Seventh Heaven', reward: 1}, {name: 'Sensational', reward: 2}, {name: 'Felicity', reward: 0}, {name: 'Unsurpassable', reward: 1} ],
            [ {name: 'First Class', reward: 1}, {name: 'Seventh Heaven', reward: 2}, {name: 'Sensational', reward: 3}, {name: 'Felicity', reward: 0}, {name: 'Unsurpassable', reward: 1} ],
            [ {name: 'First Class', reward: 1}, {name: 'Seventh Heaven', reward: 0}, {name: 'Sensational', reward: 2}, {name: 'Felicity', reward: 3}, {name: 'Unsurpassable', reward: 1} ],
            [ {name: 'First Class', reward: 1}, {name: 'Seventh Heaven', reward: 1}, {name: 'Sensational', reward: 2}, {name: 'Felicity', reward: 0}, {name: 'Unsurpassable', reward: 3} ],
            // negative levers
            [ {name: 'Abduction', reward: 1}, {name: 'Motormouth', reward: 3}, {name: 'Disrespect', reward: 2}, {name: 'Misdirect', reward: 0}, {name: 'Sorry', reward: 1} ],
            [ {name: 'Abduction', reward: 3}, {name: 'Motormouth', reward: 1}, {name: 'Disrespect', reward: 2}, {name: 'Misdirect', reward: 0}, {name: 'Sorry', reward: 1} ],
            [ {name: 'Abduction', reward: 1}, {name: 'Motormouth', reward: 2}, {name: 'Disrespect', reward: 3}, {name: 'Misdirect', reward: 0}, {name: 'Sorry', reward: 1} ],
            [ {name: 'Abduction', reward: 1}, {name: 'Motormouth', reward: 0}, {name: 'Disrespect', reward: 2}, {name: 'Misdirect', reward: 3}, {name: 'Sorry', reward: 1} ],
            [ {name: 'Abduction', reward: 1}, {name: 'Motormouth', reward: 1}, {name: 'Disrespect', reward: 2}, {name: 'Misdirect', reward: 0}, {name: 'Sorry', reward: 3} ],
            // neutral levers
            [ {name: 'A', reward: 1}, {name: 'B', reward: 3}, {name: 'C', reward: 2}, {name: 'D', reward: 0}, {name: 'E', reward: 1} ],
            [ {name: 'A', reward: 3}, {name: 'B', reward: 1}, {name: 'C', reward: 2}, {name: 'D', reward: 0}, {name: 'E', reward: 1} ],
            [ {name: 'A', reward: 1}, {name: 'B', reward: 2}, {name: 'C', reward: 3}, {name: 'D', reward: 0}, {name: 'E', reward: 1} ],
            [ {name: 'A', reward: 1}, {name: 'B', reward: 0}, {name: 'C', reward: 2}, {name: 'D', reward: 3}, {name: 'E', reward: 1} ],
            [ {name: 'A', reward: 1}, {name: 'B', reward: 1}, {name: 'C', reward: 2}, {name: 'D', reward: 0}, {name: 'E', reward: 3} ],
        ]

        let i = 5

        let plotWidth = 800, plotHeight = 400, tfSize = 20,  afSize = 18;
        // let plotWidth = 264, plotHeight = 132, tfSize = 6.6, afSize = 5.94;

        // Assign the specification to a local variable vlSpec.
        var vlSpec = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        config: {
            view: { stroke: 'transparent' },
            legend: {
                disable: true
            }
        },
        title: {
            text: ["Average Reward (per token) for Each Lever"],
            fontSize: tfSize,
            offset: tfSize,
            color: plot_color
        },
        data: {
            values: data[i]
        },
        width: plotWidth,
        height: plotHeight,
        mark: { type: 'bar', width: {band: 0.5}},
        encoding: {
            x: {
            field: 'name', 
            type: 'nominal',
            axis: {
                title: 'Lever Name',
                titleFontSize: afSize,
                labelColor: plot_color,
                labelFontSize: afSize,
                domainColor: plot_color,
                tickColor: plot_color,
                titleColor: plot_color,
                grid: false,
                labelAngle: 0
            }
            },
            y: {
            aggregate: 'average',
            field: 'reward',
            type: 'quantitative',
            axis: {
                title: 'Average Reward (per token)',
                titleFontSize: afSize,
                labelFontSize: afSize,
                labelColor: plot_color,
                domainColor: plot_color,
                tickColor: plot_color,
                titleColor: plot_color,
                values: [0,1,2,3],
                grid: false
            }
            },
            color: {
            field: 'name',
            scale: {range: [plot_color]}
            }
        }
        };

        // Embed the visualization in the container with id `vis`
        vegaEmbed('#vis', vlSpec);
    </script>
  </body>
</html>
